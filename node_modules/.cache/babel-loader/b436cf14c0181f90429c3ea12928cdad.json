{"ast":null,"code":"import algosdk from \"algosdk\";\nconst port = \"\";\nconst CHOICE_ID = 21364625;\nconst baseServer = \"https://testnet-algorand.api.purestake.io/ps2\";\nconst indexerAddress = \"https://testnet-algorand.api.purestake.io/idx2\";\nconst token = {\n  \"X-API-Key\": \"fi0QdbiBVl8hsVMCA2SUg6jnQdvAzxY48Zy2G6Yc\"\n};\nconst algodClient = new algosdk.Algodv2(token, baseServer, port);\nconst indexerClient = new algosdk.Indexer(token, indexerAddress, port);\n\nconst getCommittedAmount = async ({\n  options\n}) => {\n  try {\n    let txnArray = [];\n    let userAddress = \"S76LPUPTSGL56BUGRKEQSWEDQ6VSMP62FPE3XJDREJ2XIDWQC36DL2KDJQ\";\n    let pastTxn = await indexerClient.searchForTransactions().address(userAddress).assetID(CHOICE_ID).limit(20).do();\n    const txns = pastTxn[\"transactions\"];\n    txns.forEach(element => {\n      const transaction = element[\"asset-transfer-transaction\"];\n\n      if (transaction[\"receiver\"] == firstAddress) {\n        const obj = {\n          candidate: \"Red\",\n          address: firstAddress,\n          Id: element[\"id\"],\n          amount: transaction[\"amount\"] / 100\n        };\n        txnArray.push(obj);\n      } else if (transaction[\"receiver\"] == secondAddress) {\n        const obj = {\n          candidate: \"Blue\",\n          address: secondAddress,\n          Id: element[\"id\"],\n          amount: transaction[\"amount\"] / 100\n        };\n        txnArray.push(obj);\n      }\n    });\n    console.log(txnArray);\n  } catch (error) {\n    console.log(error);\n  }\n\n  return \"good\";\n};\n\nexport { getCommittedAmount };","map":{"version":3,"sources":["C:/Users/Williams/Desktop/App/choice-voting-app/frontend/src/getCommittedAmount.js"],"names":["algosdk","port","CHOICE_ID","baseServer","indexerAddress","token","algodClient","Algodv2","indexerClient","Indexer","getCommittedAmount","options","txnArray","userAddress","pastTxn","searchForTransactions","address","assetID","limit","do","txns","forEach","element","transaction","firstAddress","obj","candidate","Id","amount","push","secondAddress","console","log","error"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,SAApB;AAEA,MAAMC,IAAI,GAAG,EAAb;AACA,MAAMC,SAAS,GAAG,QAAlB;AACA,MAAMC,UAAU,GAAG,+CAAnB;AACA,MAAMC,cAAc,GAAG,gDAAvB;AACA,MAAMC,KAAK,GAAG;AAAE,eAAa;AAAf,CAAd;AAEA,MAAMC,WAAW,GAAG,IAAIN,OAAO,CAACO,OAAZ,CAAoBF,KAApB,EAA2BF,UAA3B,EAAuCF,IAAvC,CAApB;AAEA,MAAMO,aAAa,GAAG,IAAIR,OAAO,CAACS,OAAZ,CAAoBJ,KAApB,EAA2BD,cAA3B,EAA2CH,IAA3C,CAAtB;;AAEA,MAAMS,kBAAkB,GAAG,OAAO;AAAEC,EAAAA;AAAF,CAAP,KAAuB;AAChD,MAAI;AACF,QAAIC,QAAQ,GAAG,EAAf;AACA,QAAIC,WAAW,GACb,4DADF;AAEA,QAAIC,OAAO,GAAG,MAAMN,aAAa,CAC9BO,qBADiB,GAEjBC,OAFiB,CAETH,WAFS,EAGjBI,OAHiB,CAGTf,SAHS,EAIjBgB,KAJiB,CAIX,EAJW,EAKjBC,EALiB,EAApB;AAOA,UAAMC,IAAI,GAAGN,OAAO,CAAC,cAAD,CAApB;AAEAM,IAAAA,IAAI,CAACC,OAAL,CAAcC,OAAD,IAAa;AACxB,YAAMC,WAAW,GAAGD,OAAO,CAAC,4BAAD,CAA3B;;AACA,UAAIC,WAAW,CAAC,UAAD,CAAX,IAA2BC,YAA/B,EAA6C;AAC3C,cAAMC,GAAG,GAAG;AACVC,UAAAA,SAAS,EAAE,KADD;AAEVV,UAAAA,OAAO,EAAEQ,YAFC;AAGVG,UAAAA,EAAE,EAAEL,OAAO,CAAC,IAAD,CAHD;AAIVM,UAAAA,MAAM,EAAEL,WAAW,CAAC,QAAD,CAAX,GAAwB;AAJtB,SAAZ;AAMAX,QAAAA,QAAQ,CAACiB,IAAT,CAAcJ,GAAd;AACD,OARD,MAQO,IAAIF,WAAW,CAAC,UAAD,CAAX,IAA2BO,aAA/B,EAA8C;AACnD,cAAML,GAAG,GAAG;AACVC,UAAAA,SAAS,EAAE,MADD;AAEVV,UAAAA,OAAO,EAAEc,aAFC;AAGVH,UAAAA,EAAE,EAAEL,OAAO,CAAC,IAAD,CAHD;AAIVM,UAAAA,MAAM,EAAEL,WAAW,CAAC,QAAD,CAAX,GAAwB;AAJtB,SAAZ;AAMAX,QAAAA,QAAQ,CAACiB,IAAT,CAAcJ,GAAd;AACD;AACF,KAnBD;AAoBAM,IAAAA,OAAO,CAACC,GAAR,CAAYpB,QAAZ;AACD,GAlCD,CAkCE,OAAOqB,KAAP,EAAc;AACdF,IAAAA,OAAO,CAACC,GAAR,CAAYC,KAAZ;AACD;;AAED,SAAO,MAAP;AACD,CAxCD;;AA0CA,SAASvB,kBAAT","sourcesContent":["import algosdk from \"algosdk\";\r\n\r\nconst port = \"\";\r\nconst CHOICE_ID = 21364625;\r\nconst baseServer = \"https://testnet-algorand.api.purestake.io/ps2\";\r\nconst indexerAddress = \"https://testnet-algorand.api.purestake.io/idx2\";\r\nconst token = { \"X-API-Key\": \"fi0QdbiBVl8hsVMCA2SUg6jnQdvAzxY48Zy2G6Yc\" };\r\n\r\nconst algodClient = new algosdk.Algodv2(token, baseServer, port);\r\n\r\nconst indexerClient = new algosdk.Indexer(token, indexerAddress, port);\r\n\r\nconst getCommittedAmount = async ({ options }) => {\r\n  try {\r\n    let txnArray = [];\r\n    let userAddress =\r\n      \"S76LPUPTSGL56BUGRKEQSWEDQ6VSMP62FPE3XJDREJ2XIDWQC36DL2KDJQ\";\r\n    let pastTxn = await indexerClient\r\n      .searchForTransactions()\r\n      .address(userAddress)\r\n      .assetID(CHOICE_ID)\r\n      .limit(20)\r\n      .do();\r\n\r\n    const txns = pastTxn[\"transactions\"];\r\n\r\n    txns.forEach((element) => {\r\n      const transaction = element[\"asset-transfer-transaction\"];\r\n      if (transaction[\"receiver\"] == firstAddress) {\r\n        const obj = {\r\n          candidate: \"Red\",\r\n          address: firstAddress,\r\n          Id: element[\"id\"],\r\n          amount: transaction[\"amount\"] / 100,\r\n        };\r\n        txnArray.push(obj);\r\n      } else if (transaction[\"receiver\"] == secondAddress) {\r\n        const obj = {\r\n          candidate: \"Blue\",\r\n          address: secondAddress,\r\n          Id: element[\"id\"],\r\n          amount: transaction[\"amount\"] / 100,\r\n        };\r\n        txnArray.push(obj);\r\n      }\r\n    });\r\n    console.log(txnArray);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n\r\n  return \"good\";\r\n};\r\n\r\nexport { getCommittedAmount };\r\n"]},"metadata":{},"sourceType":"module"}